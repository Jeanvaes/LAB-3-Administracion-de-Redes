# 2.1 Topología:
El laboratorio se basó en replicar la siguiente topología presentada por el profesor, en la que se evidencia 2 intranets IPv6 con subnets propias, una DMZ con 2 servidores con propósitos web, y una zona WAN IPv4 a la que las 2 intranets tienen acceso. Tomando las decisiones correctas tanto en subneteo, como selección de protocolos y servicios para el funcionamiento correcto de: InterVlan Routing, IntraVlan Routing, migración IPv6 a IPv4, Stateless DHCP, Enrutamiento de paquetes (EIGRP o OSPF tanto en versiones IPv4 e IPv6), DNS y Filtros de paquetes.
![image](https://user-images.githubusercontent.com/128845389/229878516-70d027b0-6ec8-48b0-9784-d4c9d005fa2a.png)
`fig 1. topología de la red`

A su vez, se puede evidenciar que la imagen contiene todos los requisitos de red necesarios para hacer un diseño estructurado.

# 2.2 Diseño estructurado:
Para esta parte se tuvo que responder ciertas preguntas relacionadas con la red como: ¿Cuantas subnets necesita toda la topología?, ¿Cuántos host necesita cada subnet?, ¿Qué dispositivos pertenecen a cada subnet?, ¿Dónde se deben hacer uso de traducciones de IP?, ¿Dónde se deben conservar Ips? [1]. Para esto se hizo de conocimiento previo, como proceso de subneteo IPv6 e IPv4 [2], para realizar la siguiente tabla.
![image](https://user-images.githubusercontent.com/128845389/229879324-b2acac12-7df5-422a-b601-36d4931626cf.png)

`fig 2. tabla diseño estructurado.`

El análisis del mismo se hace a continuación:
1. Como se evidencia en los requerimientos de la red, para las dos intranets se piden 3 subnets IPv6 (Native, ING/Vice, Tech/Tresury) cada una con 950 host, el proceso para hacer el Subneteo de la subnet ING se detalla de la siguiente manera y es replicable para toda la topología IPv6: 

         Espacio de la net: 2001:1200:A2::/48
         Agregamos 16 bits al espació de la net para tener 64 bits de red, 48 de NET ID y 16 de subnet, y además 64 de hosts.
         
         Nuevo espacio de la net: 2001:1200:A2::/64
         Agregamos en el nuevo cuarteto el identificador de la subnet.
         ING: 2001:1200:A2:50::/64
         
         Ya una vez hecho esto, tenemos la subneteada la red con numero de subnets de 2^16= 65536 subnets y un numero de hosts de 2^64 = 1.8446744e+19 hosts

2. De igual manera, se evidencia que la DMZ necesita 6 hosts ya que del mismo hacen parte: 1 interfaz del router R1_BOG, los servidores WEB y DNS y una interfaz del switch DMZ, se sigue el mismo procedimiento anterior.

3. También se evidencia nos enlaces seriales WAN IPv6 entre los routers R1_BOG-ISP_BOG y R2_MAD-ISP_ESP, para los mismos se necesitan 2 IP's, pero se hace el mismo procedimiento del apartado 1. 

Todo el subneteo de IPv6 se hace de manera poco eficiente, es decir, perdiendo ip's usables por rango. Ya que, a día de hoy, la cantidad de Ip's que ofrece IPv6 es tan grande que permite hacer el subneteo de una manera estándar agregando 16 bits al identificador de red, dejando 64 bits para red y subneteo y 64 para host, que como se mostró anteriormente da como resultado hasta 65000 subnets y más de 18 trillones. En pocas palabras, IPv6 es tan grande que a dia de hoy no importante como se haga el subneteo, de igual manera van a haber ips publicas y ruteables para cada átomo en la tierra. 

4. Para los servidores y las interfaces tanto físicas como virtuales de los switches y routers, se asignaron las ips de manera estática, ya que de esta manera su administración y acceso es mucho más fácil, de igual manera todas las ips IPv6 son publicas, ya que todavía no se define el debate de si proveer la IPv6 con IPs privadas. De igual forma, si se tuvieran ips privadas todos los nodos terminales deberían tener una a excepción de los dispositivos en DMZ, ya que la DMZ debe ser accesible por su naturaleza, agregando que los nodos intermedios internos de las intranet (nodos de los router y switches a los que se conectan los dispositivos de las intranet) también deberían tener una ip privada.

5. Para la mayoría de nodos terminales se eligió un direccionamiento dinámico, ya que ayuda a la asignación automática de IPs y permite una administración más sencilla. Se eligió y configuró Stateless DHCP con EUI-64, este mismo nos permite que sea el router quien asigne el prefijo de red y el default gateway, pero que sea un servidor DHCPv6 quien asigne otra información, en este caso, la DNS. Se hizo de esta manera ya que:

     1. full SLAAC: No permite autoconfigurar el DNS que es muy necesario para poder acceder a la pagina web en esta practica. 
     2. Statefull DHCP: Complica la configuración y la topología en general, y no es necesario tener la información de cada IP asignada a cada 
        dispositivo ni su trazabilidad al no estar usando servicios como NAT64, etc.
     3. EUI-64 sobre generada al azar: Ya que EUI-64 permite saber de que dispositivo es cada IP y las probabilidades de que se repita una IP son muy 
        bajas.

6. En los requerimientos de red, para la intranet BOG se uso OSPFv3 y para la intranet MAD se uso EIGRPv6, de la misma manera para la WAN se usaron OSPF e EIGRP como fue pedido, haciendo uso simultáneamente de varias rutas estáticas para redirigir el trafico como fuese necesario y también redistribuyendo protocolos de enrutamiento para el correcto funcionamiento de toda la red. 

7. WAN IPv4: Para la misma en todos los casos son solamente necesarias 2 Ips, ya que son enlaces punto a punto, con el conocimiento y experiencia previos [3] se sabe que la mascara de subnet va a ser 30, pero el proceso de subneteo se detalla a continuación: 


          ID de red: 190.85.202.0/24
          Mascara de subred: 255.255.255.{00000000
          Host necesarios: 2 = 10 en binario (numero de ceros a reservar)
          Nueva mascara: 255.255.255.{11111100 = 255.255.255.252
          
          Rangos de red: 190.85.202.0-190.85.202.3
                         190.85.202.4-190.85.202.7
                         190.85.202.8-190.85.202.11
                         190.85.202.12-190.85.202.15
                         ...
**La configuración de todo lo anterior se profundizara más adelante.**  

# 2.3 Procedimiento:
## 2.3.1 Montaje topología física y configuración básica:

Lo primero fue poner todos los componentes solicitados en la topología en packet tracer, agregar todas las interfaces extras necesarias como puertos seriales y conectar todas las interfaces necesarias como muestra la imagen de la topología provista.

Materiales:

* 6 Switches 2960.
* 6 Switches 2811 con 2 tarjetas WIC-2T.
* 1 Multilayer Switch 3650.
* 2 Servidores multipropósito.
* 4 Computadores.

Se hizo una configuración básica de todos los componentes anteriores siguiendo el conocimiento previo y la documentación propia[4], a excepción del multilayer switch el cual fue configurado siguiendo las guías de Cisco[5]. De manera resumida lo hecho fue: crear nombres y claves, encriptar claves, asignar ips y default gateways, configurar telnet, crear vlans, asignar puertos, configurar STP y VTP.

La configuración del MLSW se detalla a continuación: 

